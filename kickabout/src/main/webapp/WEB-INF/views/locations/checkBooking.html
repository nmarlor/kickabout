<!DOCTYPE html>
<html class="no-js" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
<title>Kickabout</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link href="../../../resources/css/bootstrap.min.css" rel="stylesheet" media="screen" th:href="@{/resources/css/bootstrap.min.css}"/>
    <link href="../../../resources/css/core.css" rel="stylesheet" media="screen" th:href="@{/resources/css/core.css}" />
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="../../../resources/js/bootstrap.min.js" th:src="@{/resources/js/bootstrap.min.js}"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"/>
	<link rel="stylesheet" href="/resources/demos/style.css"/>
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css"/>
	<script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script>
	  
	  <script>
	  $( function() {
	    $("#datepicker").datepicker({ 
	    	minDate: 0 ,
	    	 dateFormat: 'dd/mm/yy'});
	  } );
	  </script>
	  
	  <script>
	  $( function() {
	  $('#timepicker').timepicker({
	    timeFormat: 'HH:mm',
	    interval: 15,
	    minTime: '12',
	    maxTime: '23:00',
	    startTime: '12:00',
	    dynamic: false,
	    dropdown: true,
	    scrollbar: true});
	  });
	  </script>
	  
</head>
<body>
	<div th:replace="fragments/header">Header</div>
	<div class="jumbotron default">
		<div class="col-sm-12" align="center">
			<h2>
			<span class="header-pitches" th:text="|${location.name}|"></span>
			</h2>
			<br></br>
			<span th:text="|Bookings available for ${sport} for your time and date|"></span>
			<br></br>
			<span th:text="|Book now to avoid disappointment!|"></span>
			<br></br><br></br>
		</div>
		
		<div class="col-lg-4 search-again-form" align="center">
		<form method="post" th:action="@{location}" th:object="${venueForm}">
		<input type="hidden" th:value="locationId" th:field="*{locationId}"/>
		<input type="hidden" th:value="name" th:field="*{searchedName}"/>
		<input type="hidden" th:value="sport" th:field="*{searchedSport}"/>
		<h4>Search again</h4>
		<br></br>
			<div class="col-lg-12">
				<div class="form-group col-lg-offset-1 col-lg-10">
					<select th:errorclass="input-form-error" class="form-control" id="sportSelected" name="sportSelected" th:field="*{sport}">
						<option value="" >Select a sport</option>
						<option th:each="sport : ${sports}"
				  				th:value="${sport}"
				  				th:text="${sport}">
				  		</option>
					</select>
				</div>
			</div>
			<br></br><br></br><br></br>
			<div class="col-lg-12">
				<div class="col-lg-offset-1 col-lg-10">
						<input th:errorclass="input-form-error" type="text" class="form-control" placeholder="Enter date" id="datepicker" name="datepicker" th:field="*{date}"/>
				</div>
			</div>
			<br></br><br></br><br></br>
			<div class="col-lg-12">
				<div class="col-lg-offset-1 col-lg-10">
						<input th:errorclass="input-form-error" type="text" class="form-control" placeholder="Enter time" id="timepicker" name = "timepicker" th:field="*{time}"/>
				</div>
			</div>
			<br></br><br></br><br></br>
			<div class="col-lg-12">
				<div class="col-lg-offset-1 col-lg-10">
					<select th:errorclass="input-form-error" class="form-control" id="durationSelected" name="durationSelected" th:field="*{duration}">
						<option value="">Select a duration</option>
						<option value="45">45 Minutes</option>
						<option value="60">60 Minutes</option>
						<option value="90">90 Minutes</option>
					</select>
				</div>
			</div>
			<br></br><br></br><br></br>
			<div class="col-lg-12">
				<div class="col-lg-5">
				</div>
				<div class="col-lg-6">
					<input type="submit" value="Search" class="btn btn-block btn-info"/>
				</div>
				<div class="col-lg-1">
				</div>
			</div>
		</form>
		</div>
		
		<div class="col-lg-8">
		<br></br>
		<div class="col-sm-12">
			<form method="post" th:action="@{/checkBooking}" th:object="${venueForm}">
			<input type="hidden" th:value="locationId" th:field="*{locationId}"/>
			<input type="hidden" th:value="sport" th:field="*{sport}"/>
			<input type="hidden" th:value="date" th:field="*{date}"/>
			<input type="hidden" th:value="formattedTime" th:field="*{formattedTime}"/>
			<input type="hidden" th:value="formattedEndTime" th:field="*{formattedEndTime}"/>
			<input type="hidden" th:value="time" th:field="*{time}"/>
			<input type="hidden" th:value="endTime" th:field="*{endTime}"/>
			<div class="pitches-scroll">
				<table class="table">
					<tbody>
						<tr th:each="pitch : ${availablePitches}">
							<td class="col-sm-4"> 
								<img class="pitches-gallery" style="vertical-align:middle" th:src="@{/pitchImage(pitchId=${pitch.id})}"/>
							</td>
							<td class="col-sm-1 text-center" style="vertical-align:middle" th:text="|Pitch ${pitch.pitchNumber}|"></td>
							<td class="col-sm-2 text-center" style="vertical-align:middle"> <span th:text="|${date}|" style="float: left; width: 100%;"></span><span th:text="|${time} - ${endTime}|"></span></td>
							<td class="col-sm-2 text-center" style="vertical-align:middle"> <span th:text="${pitch.environment}" style="float: left; width: 100%;"></span><span th:text="${pitch.surface}"></span>
							</td>
							<td class="col-sm-1 text-center" style="vertical-align:middle" th:text="|&pound; ${pitch.cost}|"> </td>
							<td class="col-sm-2 text-center" style="vertical-align:middle">
								<span class="btn-group">
								
									<button type="submit" class="btn btn-success" name="pitchId" th:value="${pitch.id}" th:field="*{pitchId}">Book now</button>
									
									<!-- <input class="btn btn-success" type="submit" value="Book Now" name="pitchId" th:value="${pitch.id}" th:field="*{pitchId}"/> -->
									<!-- <a class="btn btn-success bookPitchBtn" th:id="${pitch.id}" th:form="${venueForm}">Book now</a> -->
				  					<!-- <a class="btn btn-success pitchInfoBtn" th:href="@{/checkBooking(pitchNumber=${pitch.pitchNumber})}">Book now</a> -->
				  					
				  				</span>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			</form>
		</div>
		</div>
	</div>
</body>
</html>